{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/* eslint-disable jsx-a11y/anchor-has-content */\n\n\nimport React from \"react\";\nimport warning from \"warning\";\nimport PropTypes from \"prop-types\";\nimport invariant from \"invariant\";\nimport createContext from \"create-react-context\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { startsWith, pick, resolve, match, insertParams, validateRedirect } from \"./lib/utils\";\nimport { globalHistory, navigate, createHistory, createMemorySource } from \"./lib/history\"; ////////////////////////////////////////////////////////////////////////////////\n\nvar createNamedContext = function createNamedContext(name, defaultValue) {\n  var Ctx = createContext(defaultValue);\n  Ctx.Consumer.displayName = name + \".Consumer\";\n  Ctx.Provider.displayName = name + \".Provider\";\n  return Ctx;\n}; ////////////////////////////////////////////////////////////////////////////////\n// Location Context/Provider\n\n\nvar LocationContext = createNamedContext(\"Location\"); // sets up a listener if there isn't one already so apps don't need to be\n// wrapped in some top level provider\n\nvar Location = function Location(_ref) {\n  var children = _ref.children;\n  return React.createElement(LocationContext.Consumer, null, function (context) {\n    return context ? children(context) : React.createElement(LocationProvider, null, children);\n  });\n};\n\nvar LocationProvider = function (_React$Component) {\n  _inherits(LocationProvider, _React$Component);\n\n  function LocationProvider() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, LocationProvider);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.state = {\n      context: _this.getContext(),\n      refs: {\n        unlisten: null\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  LocationProvider.prototype.getContext = function getContext() {\n    var _props$history = this.props.history,\n        navigate = _props$history.navigate,\n        location = _props$history.location;\n    return {\n      navigate: navigate,\n      location: location\n    };\n  };\n\n  LocationProvider.prototype.componentDidCatch = function componentDidCatch(error, info) {\n    if (isRedirect(error)) {\n      var _navigate = this.props.history.navigate;\n\n      _navigate(error.uri, {\n        replace: true\n      });\n    } else {\n      throw error;\n    }\n  };\n\n  LocationProvider.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (prevState.context.location !== this.state.context.location) {\n      this.props.history._onTransitionComplete();\n    }\n  };\n\n  LocationProvider.prototype.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    var refs = this.state.refs,\n        history = this.props.history;\n    refs.unlisten = history.listen(function () {\n      Promise.resolve().then(function () {\n        // TODO: replace rAF with react deferred update API when it's ready https://github.com/facebook/react/issues/13306\n        requestAnimationFrame(function () {\n          if (!_this2.unmounted) {\n            _this2.setState(function () {\n              return {\n                context: _this2.getContext()\n              };\n            });\n          }\n        });\n      });\n    });\n  };\n\n  LocationProvider.prototype.componentWillUnmount = function componentWillUnmount() {\n    var refs = this.state.refs;\n    this.unmounted = true;\n    refs.unlisten();\n  };\n\n  LocationProvider.prototype.render = function render() {\n    var context = this.state.context,\n        children = this.props.children;\n    return React.createElement(LocationContext.Provider, {\n      value: context\n    }, typeof children === \"function\" ? children(context) : children || null);\n  };\n\n  return LocationProvider;\n}(React.Component); ////////////////////////////////////////////////////////////////////////////////\n\n\nLocationProvider.defaultProps = {\n  history: globalHistory\n};\nprocess.env.NODE_ENV !== \"production\" ? LocationProvider.propTypes = {\n  history: PropTypes.object.isRequired\n} : void 0;\n\nvar ServerLocation = function ServerLocation(_ref2) {\n  var url = _ref2.url,\n      children = _ref2.children;\n  return React.createElement(LocationContext.Provider, {\n    value: {\n      location: {\n        pathname: url,\n        search: \"\",\n        hash: \"\"\n      },\n      navigate: function navigate() {\n        throw new Error(\"You can't call navigate on the server.\");\n      }\n    }\n  }, children);\n}; ////////////////////////////////////////////////////////////////////////////////\n// Sets baseuri and basepath for nested routers and links\n\n\nvar BaseContext = createNamedContext(\"Base\", {\n  baseuri: \"/\",\n  basepath: \"/\"\n}); ////////////////////////////////////////////////////////////////////////////////\n// The main event, welcome to the show everybody.\n\nvar Router = function Router(props) {\n  return React.createElement(BaseContext.Consumer, null, function (baseContext) {\n    return React.createElement(Location, null, function (locationContext) {\n      return React.createElement(RouterImpl, _extends({}, baseContext, locationContext, props));\n    });\n  });\n};\n\nvar RouterImpl = function (_React$PureComponent) {\n  _inherits(RouterImpl, _React$PureComponent);\n\n  function RouterImpl() {\n    _classCallCheck(this, RouterImpl);\n\n    return _possibleConstructorReturn(this, _React$PureComponent.apply(this, arguments));\n  }\n\n  RouterImpl.prototype.render = function render() {\n    var _props = this.props,\n        location = _props.location,\n        _navigate2 = _props.navigate,\n        basepath = _props.basepath,\n        primary = _props.primary,\n        children = _props.children,\n        baseuri = _props.baseuri,\n        _props$component = _props.component,\n        component = _props$component === undefined ? \"div\" : _props$component,\n        domProps = _objectWithoutProperties(_props, [\"location\", \"navigate\", \"basepath\", \"primary\", \"children\", \"baseuri\", \"component\"]);\n\n    var routes = React.Children.map(children, createRoute(basepath));\n    var pathname = location.pathname;\n    var match = pick(routes, pathname);\n\n    if (match) {\n      var params = match.params,\n          uri = match.uri,\n          route = match.route,\n          element = match.route.value; // remove the /* from the end for child routes relative paths\n\n      basepath = route.default ? basepath : route.path.replace(/\\*$/, \"\");\n\n      var props = _extends({}, params, {\n        uri: uri,\n        location: location,\n        navigate: function navigate(to, options) {\n          return _navigate2(resolve(to, uri), options);\n        }\n      });\n\n      var clone = React.cloneElement(element, props, element.props.children ? React.createElement(Router, {\n        primary: primary\n      }, element.props.children) : undefined); // using 'div' for < 16.3 support\n\n      var FocusWrapper = primary ? FocusHandler : component; // don't pass any props to 'div'\n\n      var wrapperProps = primary ? _extends({\n        uri: uri,\n        location: location,\n        component: component\n      }, domProps) : domProps;\n      return React.createElement(BaseContext.Provider, {\n        value: {\n          baseuri: uri,\n          basepath: basepath\n        }\n      }, React.createElement(FocusWrapper, wrapperProps, clone));\n    } else {\n      // Not sure if we want this, would require index routes at every level\n      // warning(\n      //   false,\n      //   `<Router basepath=\"${basepath}\">\\n\\nNothing matched:\\n\\t${\n      //     location.pathname\n      //   }\\n\\nPaths checked: \\n\\t${routes\n      //     .map(route => route.path)\n      //     .join(\n      //       \"\\n\\t\"\n      //     )}\\n\\nTo get rid of this warning, add a default NotFound component as child of Router:\n      //   \\n\\tlet NotFound = () => <div>Not Found!</div>\n      //   \\n\\t<Router>\\n\\t  <NotFound default/>\\n\\t  {/* ... */}\\n\\t</Router>`\n      // );\n      return null;\n    }\n  };\n\n  return RouterImpl;\n}(React.PureComponent);\n\nRouterImpl.defaultProps = {\n  primary: true\n};\nvar FocusContext = createNamedContext(\"Focus\");\n\nvar FocusHandler = function FocusHandler(_ref3) {\n  var uri = _ref3.uri,\n      location = _ref3.location,\n      component = _ref3.component,\n      domProps = _objectWithoutProperties(_ref3, [\"uri\", \"location\", \"component\"]);\n\n  return React.createElement(FocusContext.Consumer, null, function (requestFocus) {\n    return React.createElement(FocusHandlerImpl, _extends({}, domProps, {\n      component: component,\n      requestFocus: requestFocus,\n      uri: uri,\n      location: location\n    }));\n  });\n}; // don't focus on initial render\n\n\nvar initialRender = true;\nvar focusHandlerCount = 0;\n\nvar FocusHandlerImpl = function (_React$Component2) {\n  _inherits(FocusHandlerImpl, _React$Component2);\n\n  function FocusHandlerImpl() {\n    var _temp2, _this4, _ret2;\n\n    _classCallCheck(this, FocusHandlerImpl);\n\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _ret2 = (_temp2 = (_this4 = _possibleConstructorReturn(this, _React$Component2.call.apply(_React$Component2, [this].concat(args))), _this4), _this4.state = {}, _this4.requestFocus = function (node) {\n      if (!_this4.state.shouldFocus) {\n        node.focus();\n      }\n    }, _temp2), _possibleConstructorReturn(_this4, _ret2);\n  }\n\n  FocusHandlerImpl.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var initial = prevState.uri == null;\n\n    if (initial) {\n      return _extends({\n        shouldFocus: true\n      }, nextProps);\n    } else {\n      var myURIChanged = nextProps.uri !== prevState.uri;\n      var navigatedUpToMe = prevState.location.pathname !== nextProps.location.pathname && nextProps.location.pathname === nextProps.uri;\n      return _extends({\n        shouldFocus: myURIChanged || navigatedUpToMe\n      }, nextProps);\n    }\n  };\n\n  FocusHandlerImpl.prototype.componentDidMount = function componentDidMount() {\n    focusHandlerCount++;\n    this.focus();\n  };\n\n  FocusHandlerImpl.prototype.componentWillUnmount = function componentWillUnmount() {\n    focusHandlerCount--;\n\n    if (focusHandlerCount === 0) {\n      initialRender = true;\n    }\n  };\n\n  FocusHandlerImpl.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (prevProps.location !== this.props.location && this.state.shouldFocus) {\n      this.focus();\n    }\n  };\n\n  FocusHandlerImpl.prototype.focus = function focus() {\n    if (process.env.NODE_ENV === \"test\") {\n      // getting cannot read property focus of null in the tests\n      // and that bit of global `initialRender` state causes problems\n      // should probably figure it out!\n      return;\n    }\n\n    var requestFocus = this.props.requestFocus;\n\n    if (requestFocus) {\n      requestFocus(this.node);\n    } else {\n      if (initialRender) {\n        initialRender = false;\n      } else {\n        // React polyfills [autofocus] and it fires earlier than cDM,\n        // so we were stealing focus away, this line prevents that.\n        if (!this.node.contains(document.activeElement)) {\n          this.node.focus();\n        }\n      }\n    }\n  };\n\n  FocusHandlerImpl.prototype.render = function render() {\n    var _this5 = this;\n\n    var _props2 = this.props,\n        children = _props2.children,\n        style = _props2.style,\n        requestFocus = _props2.requestFocus,\n        _props2$role = _props2.role,\n        role = _props2$role === undefined ? \"group\" : _props2$role,\n        _props2$component = _props2.component,\n        Comp = _props2$component === undefined ? \"div\" : _props2$component,\n        uri = _props2.uri,\n        location = _props2.location,\n        domProps = _objectWithoutProperties(_props2, [\"children\", \"style\", \"requestFocus\", \"role\", \"component\", \"uri\", \"location\"]);\n\n    return React.createElement(Comp, _extends({\n      style: _extends({\n        outline: \"none\"\n      }, style),\n      tabIndex: \"-1\",\n      role: role,\n      ref: function ref(n) {\n        return _this5.node = n;\n      }\n    }, domProps), React.createElement(FocusContext.Provider, {\n      value: this.requestFocus\n    }, this.props.children));\n  };\n\n  return FocusHandlerImpl;\n}(React.Component);\n\npolyfill(FocusHandlerImpl);\n\nvar k = function k() {}; ////////////////////////////////////////////////////////////////////////////////\n\n\nvar forwardRef = React.forwardRef;\n\nif (typeof forwardRef === \"undefined\") {\n  forwardRef = function forwardRef(C) {\n    return C;\n  };\n}\n\nvar Link = forwardRef(function (_ref4, ref) {\n  var innerRef = _ref4.innerRef,\n      props = _objectWithoutProperties(_ref4, [\"innerRef\"]);\n\n  return React.createElement(BaseContext.Consumer, null, function (_ref5) {\n    var basepath = _ref5.basepath,\n        baseuri = _ref5.baseuri;\n    return React.createElement(Location, null, function (_ref6) {\n      var location = _ref6.location,\n          navigate = _ref6.navigate;\n\n      var to = props.to,\n          state = props.state,\n          replace = props.replace,\n          _props$getProps = props.getProps,\n          getProps = _props$getProps === undefined ? k : _props$getProps,\n          anchorProps = _objectWithoutProperties(props, [\"to\", \"state\", \"replace\", \"getProps\"]);\n\n      var href = resolve(to, baseuri);\n      var isCurrent = location.pathname === href;\n      var isPartiallyCurrent = startsWith(location.pathname, href);\n      return React.createElement(\"a\", _extends({\n        ref: ref || innerRef,\n        \"aria-current\": isCurrent ? \"page\" : undefined\n      }, anchorProps, getProps({\n        isCurrent: isCurrent,\n        isPartiallyCurrent: isPartiallyCurrent,\n        href: href,\n        location: location\n      }), {\n        href: href,\n        onClick: function onClick(event) {\n          if (anchorProps.onClick) anchorProps.onClick(event);\n\n          if (shouldNavigate(event)) {\n            event.preventDefault();\n            navigate(href, {\n              state: state,\n              replace: replace\n            });\n          }\n        }\n      }));\n    });\n  });\n}); ////////////////////////////////////////////////////////////////////////////////\n\nfunction RedirectRequest(uri) {\n  this.uri = uri;\n}\n\nvar isRedirect = function isRedirect(o) {\n  return o instanceof RedirectRequest;\n};\n\nvar redirectTo = function redirectTo(to) {\n  throw new RedirectRequest(to);\n};\n\nvar RedirectImpl = function (_React$Component3) {\n  _inherits(RedirectImpl, _React$Component3);\n\n  function RedirectImpl() {\n    _classCallCheck(this, RedirectImpl);\n\n    return _possibleConstructorReturn(this, _React$Component3.apply(this, arguments));\n  } // Support React < 16 with this hook\n\n\n  RedirectImpl.prototype.componentDidMount = function componentDidMount() {\n    var _props3 = this.props,\n        navigate = _props3.navigate,\n        to = _props3.to,\n        from = _props3.from,\n        _props3$replace = _props3.replace,\n        replace = _props3$replace === undefined ? true : _props3$replace,\n        state = _props3.state,\n        noThrow = _props3.noThrow,\n        props = _objectWithoutProperties(_props3, [\"navigate\", \"to\", \"from\", \"replace\", \"state\", \"noThrow\"]);\n\n    Promise.resolve().then(function () {\n      navigate(insertParams(to, props), {\n        replace: replace,\n        state: state\n      });\n    });\n  };\n\n  RedirectImpl.prototype.render = function render() {\n    var _props4 = this.props,\n        navigate = _props4.navigate,\n        to = _props4.to,\n        from = _props4.from,\n        replace = _props4.replace,\n        state = _props4.state,\n        noThrow = _props4.noThrow,\n        props = _objectWithoutProperties(_props4, [\"navigate\", \"to\", \"from\", \"replace\", \"state\", \"noThrow\"]);\n\n    if (!noThrow) redirectTo(insertParams(to, props));\n    return null;\n  };\n\n  return RedirectImpl;\n}(React.Component);\n\nvar Redirect = function Redirect(props) {\n  return React.createElement(Location, null, function (locationContext) {\n    return React.createElement(RedirectImpl, _extends({}, locationContext, props));\n  });\n};\n\nprocess.env.NODE_ENV !== \"production\" ? Redirect.propTypes = {\n  from: PropTypes.string,\n  to: PropTypes.string.isRequired\n} : void 0; ////////////////////////////////////////////////////////////////////////////////\n\nvar Match = function Match(_ref7) {\n  var path = _ref7.path,\n      children = _ref7.children;\n  return React.createElement(BaseContext.Consumer, null, function (_ref8) {\n    var baseuri = _ref8.baseuri;\n    return React.createElement(Location, null, function (_ref9) {\n      var navigate = _ref9.navigate,\n          location = _ref9.location;\n      var resolvedPath = resolve(path, baseuri);\n      var result = match(resolvedPath, location.pathname);\n      return children({\n        navigate: navigate,\n        location: location,\n        match: result ? _extends({}, result.params, {\n          uri: result.uri,\n          path: path\n        }) : null\n      });\n    });\n  });\n}; ////////////////////////////////////////////////////////////////////////////////\n// Junk\n\n\nvar stripSlashes = function stripSlashes(str) {\n  return str.replace(/(^\\/+|\\/+$)/g, \"\");\n};\n\nvar createRoute = function createRoute(basepath) {\n  return function (element) {\n    if (!element) {\n      return null;\n    }\n\n    !(element.props.path || element.props.default || element.type === Redirect) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"<Router>: Children of <Router> must have a `path` or `default` prop, or be a `<Redirect>`. None found on element type `\" + element.type + \"`\") : invariant(false) : void 0;\n    !!(element.type === Redirect && (!element.props.from || !element.props.to)) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"<Redirect from=\\\"\" + element.props.from + \" to=\\\"\" + element.props.to + \"\\\"/> requires both \\\"from\\\" and \\\"to\\\" props when inside a <Router>.\") : invariant(false) : void 0;\n    !!(element.type === Redirect && !validateRedirect(element.props.from, element.props.to)) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"<Redirect from=\\\"\" + element.props.from + \" to=\\\"\" + element.props.to + \"\\\"/> has mismatched dynamic segments, ensure both paths have the exact same dynamic segments.\") : invariant(false) : void 0;\n\n    if (element.props.default) {\n      return {\n        value: element,\n        default: true\n      };\n    }\n\n    var elementPath = element.type === Redirect ? element.props.from : element.props.path;\n    var path = elementPath === \"/\" ? basepath : stripSlashes(basepath) + \"/\" + stripSlashes(elementPath);\n    return {\n      value: element,\n      default: element.props.default,\n      path: element.props.children ? stripSlashes(path) + \"/*\" : path\n    };\n  };\n};\n\nvar shouldNavigate = function shouldNavigate(event) {\n  return !event.defaultPrevented && event.button === 0 && !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}; ////////////////////////////////////////////////////////////////////////\n\n\nexport { Link, Location, LocationProvider, Match, Redirect, Router, ServerLocation, createHistory, createMemorySource, isRedirect, navigate, redirectTo, globalHistory };","map":{"version":3,"sources":["/Users/mac/Desktop/Self-Study/todo-fullstack/frontend/node_modules/@reach/router/es/index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_objectWithoutProperties","obj","keys","indexOf","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","React","warning","PropTypes","invariant","createContext","polyfill","startsWith","pick","resolve","match","insertParams","validateRedirect","globalHistory","navigate","createHistory","createMemorySource","createNamedContext","name","defaultValue","Ctx","Consumer","displayName","Provider","LocationContext","Location","_ref","children","createElement","context","LocationProvider","_React$Component","_temp","_this","_ret","_len","args","Array","_key","apply","concat","state","getContext","refs","unlisten","_props$history","props","history","location","componentDidCatch","error","info","isRedirect","_navigate","uri","replace","componentDidUpdate","prevProps","prevState","_onTransitionComplete","componentDidMount","_this2","listen","Promise","then","requestAnimationFrame","unmounted","setState","componentWillUnmount","render","Component","defaultProps","process","env","NODE_ENV","propTypes","object","isRequired","ServerLocation","_ref2","url","pathname","search","hash","Error","BaseContext","baseuri","basepath","Router","baseContext","locationContext","RouterImpl","_React$PureComponent","_props","_navigate2","primary","_props$component","component","undefined","domProps","routes","Children","map","createRoute","params","route","element","default","path","to","options","clone","cloneElement","FocusWrapper","FocusHandler","wrapperProps","PureComponent","FocusContext","_ref3","requestFocus","FocusHandlerImpl","initialRender","focusHandlerCount","_React$Component2","_temp2","_this4","_ret2","_len2","_key2","node","shouldFocus","focus","getDerivedStateFromProps","nextProps","initial","myURIChanged","navigatedUpToMe","contains","document","activeElement","_this5","_props2","style","_props2$role","role","_props2$component","Comp","outline","tabIndex","ref","n","k","forwardRef","C","Link","_ref4","innerRef","_ref5","_ref6","_props$getProps","getProps","anchorProps","href","isCurrent","isPartiallyCurrent","onClick","event","shouldNavigate","preventDefault","RedirectRequest","o","redirectTo","RedirectImpl","_React$Component3","_props3","from","_props3$replace","noThrow","_props4","Redirect","string","Match","_ref7","_ref8","_ref9","resolvedPath","result","stripSlashes","str","type","elementPath","defaultPrevented","button","metaKey","altKey","ctrlKey","shiftKey"],"mappings":"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","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/* eslint-disable jsx-a11y/anchor-has-content */\nimport React from \"react\";\nimport warning from \"warning\";\nimport PropTypes from \"prop-types\";\nimport invariant from \"invariant\";\nimport createContext from \"create-react-context\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { startsWith, pick, resolve, match, insertParams, validateRedirect } from \"./lib/utils\";\nimport { globalHistory, navigate, createHistory, createMemorySource } from \"./lib/history\";\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar createNamedContext = function createNamedContext(name, defaultValue) {\n  var Ctx = createContext(defaultValue);\n  Ctx.Consumer.displayName = name + \".Consumer\";\n  Ctx.Provider.displayName = name + \".Provider\";\n  return Ctx;\n};\n\n////////////////////////////////////////////////////////////////////////////////\n// Location Context/Provider\nvar LocationContext = createNamedContext(\"Location\");\n\n// sets up a listener if there isn't one already so apps don't need to be\n// wrapped in some top level provider\nvar Location = function Location(_ref) {\n  var children = _ref.children;\n  return React.createElement(\n    LocationContext.Consumer,\n    null,\n    function (context) {\n      return context ? children(context) : React.createElement(\n        LocationProvider,\n        null,\n        children\n      );\n    }\n  );\n};\n\nvar LocationProvider = function (_React$Component) {\n  _inherits(LocationProvider, _React$Component);\n\n  function LocationProvider() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, LocationProvider);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.state = {\n      context: _this.getContext(),\n      refs: { unlisten: null }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  LocationProvider.prototype.getContext = function getContext() {\n    var _props$history = this.props.history,\n        navigate = _props$history.navigate,\n        location = _props$history.location;\n\n    return { navigate: navigate, location: location };\n  };\n\n  LocationProvider.prototype.componentDidCatch = function componentDidCatch(error, info) {\n    if (isRedirect(error)) {\n      var _navigate = this.props.history.navigate;\n\n      _navigate(error.uri, { replace: true });\n    } else {\n      throw error;\n    }\n  };\n\n  LocationProvider.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (prevState.context.location !== this.state.context.location) {\n      this.props.history._onTransitionComplete();\n    }\n  };\n\n  LocationProvider.prototype.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    var refs = this.state.refs,\n        history = this.props.history;\n\n    refs.unlisten = history.listen(function () {\n      Promise.resolve().then(function () {\n        // TODO: replace rAF with react deferred update API when it's ready https://github.com/facebook/react/issues/13306\n        requestAnimationFrame(function () {\n          if (!_this2.unmounted) {\n            _this2.setState(function () {\n              return { context: _this2.getContext() };\n            });\n          }\n        });\n      });\n    });\n  };\n\n  LocationProvider.prototype.componentWillUnmount = function componentWillUnmount() {\n    var refs = this.state.refs;\n\n    this.unmounted = true;\n    refs.unlisten();\n  };\n\n  LocationProvider.prototype.render = function render() {\n    var context = this.state.context,\n        children = this.props.children;\n\n    return React.createElement(\n      LocationContext.Provider,\n      { value: context },\n      typeof children === \"function\" ? children(context) : children || null\n    );\n  };\n\n  return LocationProvider;\n}(React.Component);\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nLocationProvider.defaultProps = {\n  history: globalHistory\n};\nprocess.env.NODE_ENV !== \"production\" ? LocationProvider.propTypes = {\n  history: PropTypes.object.isRequired\n} : void 0;\nvar ServerLocation = function ServerLocation(_ref2) {\n  var url = _ref2.url,\n      children = _ref2.children;\n  return React.createElement(\n    LocationContext.Provider,\n    {\n      value: {\n        location: {\n          pathname: url,\n          search: \"\",\n          hash: \"\"\n        },\n        navigate: function navigate() {\n          throw new Error(\"You can't call navigate on the server.\");\n        }\n      }\n    },\n    children\n  );\n};\n\n////////////////////////////////////////////////////////////////////////////////\n// Sets baseuri and basepath for nested routers and links\nvar BaseContext = createNamedContext(\"Base\", { baseuri: \"/\", basepath: \"/\" });\n\n////////////////////////////////////////////////////////////////////////////////\n// The main event, welcome to the show everybody.\nvar Router = function Router(props) {\n  return React.createElement(\n    BaseContext.Consumer,\n    null,\n    function (baseContext) {\n      return React.createElement(\n        Location,\n        null,\n        function (locationContext) {\n          return React.createElement(RouterImpl, _extends({}, baseContext, locationContext, props));\n        }\n      );\n    }\n  );\n};\n\nvar RouterImpl = function (_React$PureComponent) {\n  _inherits(RouterImpl, _React$PureComponent);\n\n  function RouterImpl() {\n    _classCallCheck(this, RouterImpl);\n\n    return _possibleConstructorReturn(this, _React$PureComponent.apply(this, arguments));\n  }\n\n  RouterImpl.prototype.render = function render() {\n    var _props = this.props,\n        location = _props.location,\n        _navigate2 = _props.navigate,\n        basepath = _props.basepath,\n        primary = _props.primary,\n        children = _props.children,\n        baseuri = _props.baseuri,\n        _props$component = _props.component,\n        component = _props$component === undefined ? \"div\" : _props$component,\n        domProps = _objectWithoutProperties(_props, [\"location\", \"navigate\", \"basepath\", \"primary\", \"children\", \"baseuri\", \"component\"]);\n\n    var routes = React.Children.map(children, createRoute(basepath));\n    var pathname = location.pathname;\n\n\n    var match = pick(routes, pathname);\n\n    if (match) {\n      var params = match.params,\n          uri = match.uri,\n          route = match.route,\n          element = match.route.value;\n\n      // remove the /* from the end for child routes relative paths\n\n      basepath = route.default ? basepath : route.path.replace(/\\*$/, \"\");\n\n      var props = _extends({}, params, {\n        uri: uri,\n        location: location,\n        navigate: function navigate(to, options) {\n          return _navigate2(resolve(to, uri), options);\n        }\n      });\n\n      var clone = React.cloneElement(element, props, element.props.children ? React.createElement(\n        Router,\n        { primary: primary },\n        element.props.children\n      ) : undefined);\n\n      // using 'div' for < 16.3 support\n      var FocusWrapper = primary ? FocusHandler : component;\n      // don't pass any props to 'div'\n      var wrapperProps = primary ? _extends({ uri: uri, location: location, component: component }, domProps) : domProps;\n\n      return React.createElement(\n        BaseContext.Provider,\n        { value: { baseuri: uri, basepath: basepath } },\n        React.createElement(\n          FocusWrapper,\n          wrapperProps,\n          clone\n        )\n      );\n    } else {\n      // Not sure if we want this, would require index routes at every level\n      // warning(\n      //   false,\n      //   `<Router basepath=\"${basepath}\">\\n\\nNothing matched:\\n\\t${\n      //     location.pathname\n      //   }\\n\\nPaths checked: \\n\\t${routes\n      //     .map(route => route.path)\n      //     .join(\n      //       \"\\n\\t\"\n      //     )}\\n\\nTo get rid of this warning, add a default NotFound component as child of Router:\n      //   \\n\\tlet NotFound = () => <div>Not Found!</div>\n      //   \\n\\t<Router>\\n\\t  <NotFound default/>\\n\\t  {/* ... */}\\n\\t</Router>`\n      // );\n      return null;\n    }\n  };\n\n  return RouterImpl;\n}(React.PureComponent);\n\nRouterImpl.defaultProps = {\n  primary: true\n};\n\n\nvar FocusContext = createNamedContext(\"Focus\");\n\nvar FocusHandler = function FocusHandler(_ref3) {\n  var uri = _ref3.uri,\n      location = _ref3.location,\n      component = _ref3.component,\n      domProps = _objectWithoutProperties(_ref3, [\"uri\", \"location\", \"component\"]);\n\n  return React.createElement(\n    FocusContext.Consumer,\n    null,\n    function (requestFocus) {\n      return React.createElement(FocusHandlerImpl, _extends({}, domProps, {\n        component: component,\n        requestFocus: requestFocus,\n        uri: uri,\n        location: location\n      }));\n    }\n  );\n};\n\n// don't focus on initial render\nvar initialRender = true;\nvar focusHandlerCount = 0;\n\nvar FocusHandlerImpl = function (_React$Component2) {\n  _inherits(FocusHandlerImpl, _React$Component2);\n\n  function FocusHandlerImpl() {\n    var _temp2, _this4, _ret2;\n\n    _classCallCheck(this, FocusHandlerImpl);\n\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _ret2 = (_temp2 = (_this4 = _possibleConstructorReturn(this, _React$Component2.call.apply(_React$Component2, [this].concat(args))), _this4), _this4.state = {}, _this4.requestFocus = function (node) {\n      if (!_this4.state.shouldFocus) {\n        node.focus();\n      }\n    }, _temp2), _possibleConstructorReturn(_this4, _ret2);\n  }\n\n  FocusHandlerImpl.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var initial = prevState.uri == null;\n    if (initial) {\n      return _extends({\n        shouldFocus: true\n      }, nextProps);\n    } else {\n      var myURIChanged = nextProps.uri !== prevState.uri;\n      var navigatedUpToMe = prevState.location.pathname !== nextProps.location.pathname && nextProps.location.pathname === nextProps.uri;\n      return _extends({\n        shouldFocus: myURIChanged || navigatedUpToMe\n      }, nextProps);\n    }\n  };\n\n  FocusHandlerImpl.prototype.componentDidMount = function componentDidMount() {\n    focusHandlerCount++;\n    this.focus();\n  };\n\n  FocusHandlerImpl.prototype.componentWillUnmount = function componentWillUnmount() {\n    focusHandlerCount--;\n    if (focusHandlerCount === 0) {\n      initialRender = true;\n    }\n  };\n\n  FocusHandlerImpl.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (prevProps.location !== this.props.location && this.state.shouldFocus) {\n      this.focus();\n    }\n  };\n\n  FocusHandlerImpl.prototype.focus = function focus() {\n    if (process.env.NODE_ENV === \"test\") {\n      // getting cannot read property focus of null in the tests\n      // and that bit of global `initialRender` state causes problems\n      // should probably figure it out!\n      return;\n    }\n\n    var requestFocus = this.props.requestFocus;\n\n\n    if (requestFocus) {\n      requestFocus(this.node);\n    } else {\n      if (initialRender) {\n        initialRender = false;\n      } else {\n        // React polyfills [autofocus] and it fires earlier than cDM,\n        // so we were stealing focus away, this line prevents that.\n        if (!this.node.contains(document.activeElement)) {\n          this.node.focus();\n        }\n      }\n    }\n  };\n\n  FocusHandlerImpl.prototype.render = function render() {\n    var _this5 = this;\n\n    var _props2 = this.props,\n        children = _props2.children,\n        style = _props2.style,\n        requestFocus = _props2.requestFocus,\n        _props2$role = _props2.role,\n        role = _props2$role === undefined ? \"group\" : _props2$role,\n        _props2$component = _props2.component,\n        Comp = _props2$component === undefined ? \"div\" : _props2$component,\n        uri = _props2.uri,\n        location = _props2.location,\n        domProps = _objectWithoutProperties(_props2, [\"children\", \"style\", \"requestFocus\", \"role\", \"component\", \"uri\", \"location\"]);\n\n    return React.createElement(\n      Comp,\n      _extends({\n        style: _extends({ outline: \"none\" }, style),\n        tabIndex: \"-1\",\n        role: role,\n        ref: function ref(n) {\n          return _this5.node = n;\n        }\n      }, domProps),\n      React.createElement(\n        FocusContext.Provider,\n        { value: this.requestFocus },\n        this.props.children\n      )\n    );\n  };\n\n  return FocusHandlerImpl;\n}(React.Component);\n\npolyfill(FocusHandlerImpl);\n\nvar k = function k() {};\n\n////////////////////////////////////////////////////////////////////////////////\nvar forwardRef = React.forwardRef;\n\nif (typeof forwardRef === \"undefined\") {\n  forwardRef = function forwardRef(C) {\n    return C;\n  };\n}\n\nvar Link = forwardRef(function (_ref4, ref) {\n  var innerRef = _ref4.innerRef,\n      props = _objectWithoutProperties(_ref4, [\"innerRef\"]);\n\n  return React.createElement(\n    BaseContext.Consumer,\n    null,\n    function (_ref5) {\n      var basepath = _ref5.basepath,\n          baseuri = _ref5.baseuri;\n      return React.createElement(\n        Location,\n        null,\n        function (_ref6) {\n          var location = _ref6.location,\n              navigate = _ref6.navigate;\n\n          var to = props.to,\n              state = props.state,\n              replace = props.replace,\n              _props$getProps = props.getProps,\n              getProps = _props$getProps === undefined ? k : _props$getProps,\n              anchorProps = _objectWithoutProperties(props, [\"to\", \"state\", \"replace\", \"getProps\"]);\n\n          var href = resolve(to, baseuri);\n          var isCurrent = location.pathname === href;\n          var isPartiallyCurrent = startsWith(location.pathname, href);\n\n          return React.createElement(\"a\", _extends({\n            ref: ref || innerRef,\n            \"aria-current\": isCurrent ? \"page\" : undefined\n          }, anchorProps, getProps({ isCurrent: isCurrent, isPartiallyCurrent: isPartiallyCurrent, href: href, location: location }), {\n            href: href,\n            onClick: function onClick(event) {\n              if (anchorProps.onClick) anchorProps.onClick(event);\n              if (shouldNavigate(event)) {\n                event.preventDefault();\n                navigate(href, { state: state, replace: replace });\n              }\n            }\n          }));\n        }\n      );\n    }\n  );\n});\n\n////////////////////////////////////////////////////////////////////////////////\nfunction RedirectRequest(uri) {\n  this.uri = uri;\n}\n\nvar isRedirect = function isRedirect(o) {\n  return o instanceof RedirectRequest;\n};\n\nvar redirectTo = function redirectTo(to) {\n  throw new RedirectRequest(to);\n};\n\nvar RedirectImpl = function (_React$Component3) {\n  _inherits(RedirectImpl, _React$Component3);\n\n  function RedirectImpl() {\n    _classCallCheck(this, RedirectImpl);\n\n    return _possibleConstructorReturn(this, _React$Component3.apply(this, arguments));\n  }\n\n  // Support React < 16 with this hook\n  RedirectImpl.prototype.componentDidMount = function componentDidMount() {\n    var _props3 = this.props,\n        navigate = _props3.navigate,\n        to = _props3.to,\n        from = _props3.from,\n        _props3$replace = _props3.replace,\n        replace = _props3$replace === undefined ? true : _props3$replace,\n        state = _props3.state,\n        noThrow = _props3.noThrow,\n        props = _objectWithoutProperties(_props3, [\"navigate\", \"to\", \"from\", \"replace\", \"state\", \"noThrow\"]);\n\n    Promise.resolve().then(function () {\n      navigate(insertParams(to, props), { replace: replace, state: state });\n    });\n  };\n\n  RedirectImpl.prototype.render = function render() {\n    var _props4 = this.props,\n        navigate = _props4.navigate,\n        to = _props4.to,\n        from = _props4.from,\n        replace = _props4.replace,\n        state = _props4.state,\n        noThrow = _props4.noThrow,\n        props = _objectWithoutProperties(_props4, [\"navigate\", \"to\", \"from\", \"replace\", \"state\", \"noThrow\"]);\n\n    if (!noThrow) redirectTo(insertParams(to, props));\n    return null;\n  };\n\n  return RedirectImpl;\n}(React.Component);\n\nvar Redirect = function Redirect(props) {\n  return React.createElement(\n    Location,\n    null,\n    function (locationContext) {\n      return React.createElement(RedirectImpl, _extends({}, locationContext, props));\n    }\n  );\n};\n\nprocess.env.NODE_ENV !== \"production\" ? Redirect.propTypes = {\n  from: PropTypes.string,\n  to: PropTypes.string.isRequired\n} : void 0;\n\n////////////////////////////////////////////////////////////////////////////////\nvar Match = function Match(_ref7) {\n  var path = _ref7.path,\n      children = _ref7.children;\n  return React.createElement(\n    BaseContext.Consumer,\n    null,\n    function (_ref8) {\n      var baseuri = _ref8.baseuri;\n      return React.createElement(\n        Location,\n        null,\n        function (_ref9) {\n          var navigate = _ref9.navigate,\n              location = _ref9.location;\n\n          var resolvedPath = resolve(path, baseuri);\n          var result = match(resolvedPath, location.pathname);\n          return children({\n            navigate: navigate,\n            location: location,\n            match: result ? _extends({}, result.params, {\n              uri: result.uri,\n              path: path\n            }) : null\n          });\n        }\n      );\n    }\n  );\n};\n\n////////////////////////////////////////////////////////////////////////////////\n// Junk\nvar stripSlashes = function stripSlashes(str) {\n  return str.replace(/(^\\/+|\\/+$)/g, \"\");\n};\n\nvar createRoute = function createRoute(basepath) {\n  return function (element) {\n    if (!element) {\n      return null;\n    }\n\n    !(element.props.path || element.props.default || element.type === Redirect) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"<Router>: Children of <Router> must have a `path` or `default` prop, or be a `<Redirect>`. None found on element type `\" + element.type + \"`\") : invariant(false) : void 0;\n\n    !!(element.type === Redirect && (!element.props.from || !element.props.to)) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"<Redirect from=\\\"\" + element.props.from + \" to=\\\"\" + element.props.to + \"\\\"/> requires both \\\"from\\\" and \\\"to\\\" props when inside a <Router>.\") : invariant(false) : void 0;\n\n    !!(element.type === Redirect && !validateRedirect(element.props.from, element.props.to)) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"<Redirect from=\\\"\" + element.props.from + \" to=\\\"\" + element.props.to + \"\\\"/> has mismatched dynamic segments, ensure both paths have the exact same dynamic segments.\") : invariant(false) : void 0;\n\n    if (element.props.default) {\n      return { value: element, default: true };\n    }\n\n    var elementPath = element.type === Redirect ? element.props.from : element.props.path;\n\n    var path = elementPath === \"/\" ? basepath : stripSlashes(basepath) + \"/\" + stripSlashes(elementPath);\n\n    return {\n      value: element,\n      default: element.props.default,\n      path: element.props.children ? stripSlashes(path) + \"/*\" : path\n    };\n  };\n};\n\nvar shouldNavigate = function shouldNavigate(event) {\n  return !event.defaultPrevented && event.button === 0 && !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n};\n\n////////////////////////////////////////////////////////////////////////\nexport { Link, Location, LocationProvider, Match, Redirect, Router, ServerLocation, createHistory, createMemorySource, isRedirect, navigate, redirectTo, globalHistory };"]},"metadata":{},"sourceType":"module"}